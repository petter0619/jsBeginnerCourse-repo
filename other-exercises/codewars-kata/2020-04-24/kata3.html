<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codewars Kata 3 - 2020-04-24</title>
    <link rel="stylesheet" href="../../../base.css">
</head>
<body>
    <h1>Instructions</h1>
    <p>
        Given an array, find the integer that appears an odd 
        number of times.
    </p>
    <p>
        There will always be only ONE integer that appears an 
        odd number of times.
    </p>
    <p>Examples:</p>
    <ul>
        <li>[20,1,-1,2,-2,3,3,5,5,1,2,4,20,4,-1,-2,5] ---> 5</li>
        <li>[1,1,2,-2,5,2,4,4,-1,-2,5] --> -1</li>
        <li>[20,1,1,2,2,3,3,5,5,4,20,4,5] --> 5</li>
        <li>[10] --> 10</li>
        <li>[1,1,1,1,1,1,10,1,1,1,1] --> 10</li>
        <li>[5,4,3,2,1,5,4,3,2,10,10] --> 1</li>
    </ul>

    <script>
        const array1 = [20,1,-1,2,-2,3,3,5,5,1,2,4,20,4,-1,-2,5];
        const array2 = [1,1,2,-2,5,2,4,4,-1,-2,5];
        const array3 = [20,1,1,2,2,3,3,5,5,4,20,4,5];
        const array4 = [10];
        const array5 = [1,1,1,1,1,1,10,1,1,1,1];
        const array6 = [5,4,3,2,1,5,4,3,2,10,10];

        // ------------------ Original Code -------------------

        function instanceCounter(tally, arrayItem) {
            tally[arrayItem] = (tally[arrayItem] || 0) + 1;
            return tally;
        }

        function findOdd(A) {
            // Tally the number of numbers with .reduce()
            const integerTally = A.reduce(instanceCounter, {});
            // Use modulo operator: % 2 to findIndex off key with off number
            const oddIndex = Object.values(integerTally).findIndex( function(item) {
                return item % 2;
            });
            // Return the key with the index of the odd number + turn it into a number
            return parseInt(Object.keys(integerTally)[oddIndex]);
        }

        console.log(findOdd(array1));
        console.log(findOdd(array2));
        console.log(findOdd(array3));
        console.log(findOdd(array4));
        console.log(findOdd(array5));
        console.log(findOdd(array6));

        // ------------------ Best Solutions -------------------

        const findOdd2 = (xs) => xs.reduce((a, b) => a ^ b); // ^ (caret) is a Bitwise XOR operator: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#.5E_%28Bitwise_XOR%29

        function findOdd3(A) {
            var obj = {};
            A.forEach(function(el){
                obj[el] ? obj[el]++ : obj[el] = 1;
            });
            
            for(prop in obj) {
                if(obj[prop] % 2 !== 0) return Number(prop);
            }
        }

    </script>
</body>
</html>